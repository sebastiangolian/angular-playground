<h1>form</h1>

<div *ngIf="isSubmitted" class="alert alert-primary" role="alert">Thanks for send form</div>

<form *ngIf="!isSubmitted"  name="form" (ngSubmit)="f.form.valid && onSubmit(f)" #f="ngForm">
    <div class="form-group">
      <label>Login:</label>
      <input type="text" class="form-control" name="login" [(ngModel)]="model.login" #login="ngModel"
        [class.is-invalid]="login.invalid && login.touched"
        minlength="3" maxlength="25" pattern="[a-zA-Z ]*" required>
      <div *ngIf="login.touched && login.invalid" class="text-danger">
          <div *ngIf="!!login.errors.required">Login is required</div>
          <div *ngIf="!!login.errors.minlength">Login is too short</div>
          <div *ngIf="!!login.errors.maxlength">Login is too lenght</div>
          <div *ngIf="!!login.errors.pattern">In login can you use only letter</div>
      </div>
    </div>
  
    <div class="form-group">
      <label>Email:</label>
      <input type="text" class="form-control" name="email" [(ngModel)]="model.email" #email="ngModel"
        [class.is-invalid]="email.invalid && email.touched"
        email required>
      <div *ngIf="email.touched && email.invalid" class="text-danger">
          <div *ngIf="!!email.errors.required">Login is required</div>
          <div *ngIf="!!email.errors.email">You must use email format example@example.com</div>
      </div>
    </div>
  
    <div ngModelGroup="address">
      <h2>Address</h2>
  
      <div class="form-group">
        <label>City:</label>
        <input type="text" class="form-control" name="city" [(ngModel)]="model.address.city" #city="ngModel" 
        [class.is-invalid]="city.invalid && city.touched"
        required>
        <div *ngIf="city.touched && city.invalid" class="text-danger">
          <div *ngIf="!!city.errors.required">City is required</div>
        </div>
      </div>
  
      <div class="form-group">
        <label>Zip Code:</label>
        <input type="text" class="form-control" name="zipcode" [(ngModel)]="model.address.zipcode" #zipcode="ngModel" 
          [class.is-invalid]="zipcode.invalid && zipcode.touched"
          minlength="6" maxlength="6" pattern="[0-9]{2}[\-]?[0-9]{3}" required>
        <div *ngIf="zipcode.touched && zipcode.invalid" class="text-danger">
          <div *ngIf="!!zipcode.errors.required">Zip code is required</div>
          <div *ngIf="!!zipcode.errors.minlength">Zip code is too short</div>
          <div *ngIf="!!zipcode.errors.maxlength">Zip code is too lenght</div>
          <div *ngIf="!!zipcode.errors.pattern">Zip code must be in 00-000 format</div>
        </div>
      </div>
    </div>
  
    <div ngModelGroup="aliases">
      <h2>Aliases
        <button class="btn btn-primary btn-sm" type="button" (click)="aliases.push('')">Add Alias</button>
        <button class="btn btn-primary btn-sm" type="button" (click)="aliases.pop()">Remove Alias</button>
      </h2> 
      
      <div *ngFor="let alias of aliases; let i = index">
        <div class="form-group">
          <label>Alias:</label>
          <input name="{{i}}" class="form-control" [(ngModel)]="alias[i]" #alias="ngModel" 
            [class.is-invalid]="!!alias.invalid && !!alias.touched"
            minlength="3" maxlength="10" required>
          <div *ngIf="!!alias.touched && !!alias.invalid" class="text-danger">
            <div *ngIf="!!alias.errors.required">Alias is required</div>
            <div *ngIf="!!alias.errors.minlength">Alias is too short</div>
            <div *ngIf="!!alias.errors.maxlength">Alias is too lenght</div>
          </div>
        </div>
      </div>
    </div>
  
    <p>Form status: {{ f.status }}</p>
    <p>Form value: {{ f.value | json }}</p>
  
    <p>
      <button type="submit" class="btn btn-primary" [disabled]="!f.valid">Submit</button>
      <button type="button" class="btn btn-info" (click)="addDefault()">Add default</button>
      <button type="reset" class="btn btn-info">Reset</button>
    </p>
  </form>
