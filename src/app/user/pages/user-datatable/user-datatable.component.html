<div class="row">
    <div class="col-12">
        <button type="button" class="btn btn-sm btn-primary mb-1 float-right" title="Add new user" (click)="onCreate()">Add new user</button>
        <div *ngIf="filterError" class="text-danger">Please enter at least 3 characters</div>
        <form name="form" (ngSubmit)="f.form.valid && onFilter(f)" #f="ngForm" autocomplete="off">
            <div class="datatable table-responsive">
                <table class="table table-striped table-sm">
                    <thead>
                        <th scope="col"><a (click)="onSort('id')">Id <span *ngIf="sortBy == 'id'" [innerHTML]="getSortClass('id')"></span></a></th>
                        <th scope="col"><a (click)="onSort('created')">Create date <span *ngIf="sortBy == 'created'" [innerHTML]="getSortClass('created')"></span></a></th>
                        <th scope="col"><a (click)="onSort('email')">Email <span *ngIf="sortBy == 'email'" [innerHTML]="getSortClass('email')"></span></a></th>
                        <th scope="col"><a (click)="onSort('zipCode')">Zipcode <span *ngIf="sortBy == 'zipCode'" [innerHTML]="getSortClass('zipCode')"></span></a></th>
                        <th scope="col"><a (click)="onSort('active')">Is active <span *ngIf="sortBy == 'active'" [innerHTML]="getSortClass('active')"></span></a></th>
                        <th scope="col"><a (click)="onSort('IdRole')">Role <span *ngIf="sortBy == 'idRole'" [innerHTML]="getSortClass('idRole')"></span></a></th>
                        <th scope="col">
                            <select *ngIf="limitEnabled" class="form-control form-control-sm float-right" name="limit" id="limit" (change)="onChangeLimit($event.target)">
                                <option *ngFor="let value of limitValues" [ngValue]="value" [selected]="value == this.limit">{{value}}</option>
                            </select>
                        </th>
                    </thead>
                    <tr *ngIf="filterEnabled">
                        <th><input type="text" class="form-control form-control-sm" name="id" [(ngModel)]="model.id" #id="ngModel" ></th>
                        <th><input type="text" class="form-control form-control-sm" name="created" [(ngModel)]="model.created" #created="ngModel" mask="0000-00-00 00:00:00" [dropSpecialCharacters]="false" [showMaskTyped]="true" placeHolderCharacter="_" [validation]="false"></th>
                        <th><input type="text" class="form-control form-control-sm" name="email" [(ngModel)]="model.email" #email="ngModel"></th>
                        <th><input type="text" class="form-control form-control-sm" name="zipCode" [(ngModel)]="model.zipCode" #zipCode="ngModel" mask="00-000" [dropSpecialCharacters]="false" [showMaskTyped]="true" placeHolderCharacter="_" [validation]="false"></th>
                        <th>
                            <select class="form-control form-control-sm" name="active" [(ngModel)]="model.active" #active="ngModel">
                                <option value=""></option>
                                <option value="true">Yes</option>
                                <option value="false">No</option>
                            </select>
                        </th>
                        <th></th>
                        <th>
                            <div class="btn-group float-right">
                                <input type="image" class="form-control form-control-sm mr-1" src="/assets/icons/search.svg" width="20" height="20" title="Search" />
                                <input type="image" class="form-control form-control-sm" src="/assets/icons/x.svg" alt="" width="24" height="24" title="Clear filter" (click)="f.reset();$event.preventDefault();onFilterReset();" />
                            </div>
                        </th>
                    </tr>
                    <tbody *ngIf="items">
                        <tr *ngFor="let item of items">
                            <td>{{item.id}}</td>
                            <td>{{item.created}}</td>
                            <td>{{item.email}}</td>
                            <td>{{item.zipCode}}</td>
                            <td>{{item.active | boolean}}</td>
                            <td>{{item.idRole}}</td>
                            <td class="text-right">
                                <a class="mr-1" (click)="onView(item)"><app-icon-b name="eye" title="View"></app-icon-b></a>
                                <a class="mr-1" (click)="onSetRole(item)"><app-icon-b name="person-plus" title="Set role"></app-icon-b></a>                
                                <a class="mr-1" (click)="onEdit(item)"><app-icon-b name="pencil" title="Edit" width="20" height="20"></app-icon-b></a>
                                <a class="mr-1" (click)="onDownload(item)"><app-icon-b name="download" title="Download"></app-icon-b></a>
                                <a class="mr-1" (click)="onDelete(item)"><app-icon-b name="trash" title="Delete" width="20" height="20"></app-icon-b></a>
                            </td>
                        </tr>
                    </tbody>
                    <caption *ngIf="!items">No records</caption>
                </table>
            </div>
        </form>
        <div *ngIf="items && total > limit" class="row justify-content-center">
            <div class="col-4">Total: {{ total }}</div>
            <div class="col-4 text-center">Page {{page}} z {{getTotalPage()}}</div>
            <div class="col-4">
                <button class="btn btn-primary btn-sm float-right ml-1" [disabled]="total <= limit*page" (click)="onNext()">&gt;</button>
                <button class="btn btn-primary btn-sm float-right" [disabled]="page == 1" (click)="onPrev()">&lt;</button>
            </div>
        </div>
    </div>
</div>